<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>DG'hack 2020</title>
        <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v5.15.1/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:500,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Muli:400,400i,800,800i" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="../../css/styles.css" rel="stylesheet" /> <!--change path if file has been moved to another folder-->
    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-xl navbar-dark bg-primary fixed-top" id="sideNav">
            <a class="navbar-brand js-scroll-trigger" href="../../index.html"> <!--change path if file has been moved to another folder-->
                <span class="d-block d-xl-none">Olivier LEUNG</span>
                <span class="d-none d-xl-block"><img class="img-fluid img-profile rounded-circle mx-auto mb-2" src="../../assets/img/profile.jpg" alt="" /></span> <!--change path if file has been moved to another folder-->
            </a>
            <div class="d-none d-xl-block description_profile"> <!--d-none is used for responsiveness of the panel when you shring the window -->
                <h3>Olivier LEUNG</h3>
                <div class="subheading_panel">Cybersecurity engineer </div>
                    <div class="subheading_description">Love testing random cyber stuff !<br>That's by baking we become a baker</div>
            </div>
            <!-- button collapse panel when small windows, responsive pane -->
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button> 
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="../../ctfpage.html">CTF</a></li> <!--change path if file has been moved to another folder-->
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="../../dfirpage.html">DFIR</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="../../binarypage.html">Binary Exploitation</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="../../reversepage.html">Reverse Engineering</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="../../tutorialpage.html">Tutorial</a></li>
                </ul>
            </div>

            <div class="d-none d-xl-block social-icons">
                <a class="social-icon" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/olivierleung"><i class="fab fa-linkedin-in"></i></a>
                <a class="social-icon" target="_blank" rel="noopener noreferrer" href="https://github.com/SkallZou"><i class="fab fa-github"></i></a>
                <a class="social-icon" target="_blank" rel="noopener noreferrer" href="https://twitter.com/olivier_leung"><i class="fab fa-twitter"></i></a>
            </div>
        </nav>
        <!-- Page Content-->
        <div>
            <nav class="navbar navbar-expand-xl navbar-dark bg-secondary sticky-top">
            <h3 class="header-article"><a href="../../ctfpage.html">Capture The Flag </a>> <a href="../brigittefriang.html">Brigitte Friang Challenge </a>> Service Forensic</h3><!--change path if file has been moved to another folder-->
            </nav>
            <section class="article">
                <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                    <div class="flex-grow-1">
                        <h3 class="mb-0">1/ Access log</h3>
                        <p>
                            Reaching the /chat page, Alphone Bertillon, forensic responsible is telling us that somebody has a non-authorized access to our system. He send us a .log file and we have to investigate to find the suspicious IP address. <br>
                            <br>
                            "<strong>access.log</strong>" is a log file belonging to an Apache HTTP server, this file records every request for files. If a visitor requests an image, it is logged.
                            <img src="img/forensic/access.png" class="img-fluid" width="700">
                            Access log structure: "<strong>%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-agent}i\"</strong>" <br>
                            <br>

                           <strong>%h</strong> – Remote host (client IP address) <br>
                           <strong>%l</strong> – User identity, or dash, if none (often not used) <br>
                           <strong>%u</strong> – Username, via HTTP authentication, or dash if not used <br>
                           <strong>%t</strong> – Timestamp of when Apache received the HTTP request <br>
                           <strong>%r</strong> – The actual request itself from the client <br>
                            <strong>%>s</strong> – The status code Apache returns in response to the request <br>
                           <strong>%b</strong> – The size of the request in bytes. <br>
                           <strong>%{Referer}i</strong> – Referrer header, or dash if not used (In other words, did they click a URL on another site to come to your site) <br>
                           <strong>%{User-agent}\</strong> – User agent (contains information about the requester’s browser/OS/etc) <br>
 
                           <br>
                           The first column display the client IP address, Alphonse Bertillon said that somebody has commited an intrusion in our system, which means that the IP address used by this person shouldn't appear many times in the log.
                            <br>
                            We will count the number of each IP address and find the one that doesn't appear several times. In Linux, the command awk allows us to display a specific column. Since the IP address column is the first column, we can use the command <strong>awk '{print $1}' access.log</strong>. Then to make the reading easier, we will delete the duplicate and count how many occurences each IP address appears in the log file. The command <strong>awk '{print $1}' access.log | sort | uniq -c</strong> can do that. <br>
                            <br>
                            <strong>sort</strong> will sort the data in ascending order by default. <br>
                            <strong>uniq -c</strong> will erase duplicate and count the number of occurrences. Also, uniq detect repeated lines unless they are adjacent. That's the reason why I have used "<i>sort</i>" before <i>uniq</i> to be sure that it will remove all duplicates.

                            <img src="img/forensic/suspiciousip.png" class="img-fluid" width="700">
                            The IP address (179.97.58.61) that appear only one time in the log, this IP address is probably the one used by the attacker when he has infiltrated our system. <br>
                            <br>
                            Let's reply to Alphonse Bertillon with that IP address.
                        </p>
                    </div>
                </div>
            </section>
        </div>
        <!-- Bootstrap core JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Third party plugin JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
    </body>
</html>
